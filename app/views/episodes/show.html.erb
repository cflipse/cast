<article class="bg-slate-200 shadow py-4">
  <div class="m-6">
    <%= render PodcastHeaderComponent.new podcast: @podcast %>
  </div>

  <%= turbo_frame_tag @episode do %>
    <header class="mx-6">
      <div class="flex flex-row">
        <h2 class="text-2xl py-6 grow"><%= @episode.title %></h2>

        <div class="self-center">
          <div class="flex flex-row">
            <%= link_to edit_podcast_episode_path(@podcast, @episode),
              class:  "bg-amber-700 p-2 text-gray-300 rounded-l-md"  do  %>
              <%= render "icons/pencil" %> Edit Episode
            <% end if policy(@episode).edit? %>

            <%= button_to podcast_episode_path(@podcast, @episode),
              method: :delete,
              class: "bg-red-700 text-gray-300 p-2 rounded-r-md",
              form: { class: "inline-block", data: { "turbo-confirm": "A you sure you want to remove this episode?" } } do %>
              <%= render "icons/trash" %> Delete Episode
            <% end if policy(@episode).destroy? %>
            </div>
        </div>
      </div>

      <%= tag.p simple_format @episode.description %>
    </header>

    <div class="flex w-full sticky top-0 bottom-0 my-6">
      <%= audio_tag @episode.audio_url, controls: true, class: "grow" if @episode.audio.present? %>
    </div>

    <h3 class="m-6 text-2xl font-bold">Show Notes</h3>

    <div class="prose m-6" data-turbo="false">
      <%= markdown @episode.show_notes %>
    </div>
  <% end %>
</article>
